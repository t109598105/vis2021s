(this.webpackJsonplab07=this.webpackJsonplab07||[]).push([[0],{10:function(t,e,n){t.exports={Layout:"Layout_Layout__2SjXG","main-content":"Layout_main-content__31KcL","Main-Section":"Layout_Main-Section__NNZjw","button-group":"Layout_button-group__2Om0e","node-container":"Layout_node-container__1ogOz"}},129:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n(50),c=n.n(a),i=(n(58),n(59),n(60),n(61),n(51)),o=n(13),u=n.n(o),l=n(28),s=n(7),f=n(29),d=n(52),h=n.n(d),j=function(){var t=null;return{storePath:function(e){t=e},clearPath:function(){t=null},getPath:function(){return t}}}(),v=n(10),b=n.n(v),p=n(11),g=n(30),O=n(0),x=function(t){var e=t.parsedPath,n=t.size,a=t.duration,c=t.delay,i=t.textLength,o=Object(r.useRef)(null),u=Object(r.useState)(1),l=Object(s.a)(u,2),f=l[0],d=l[1],h=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t};return Object(r.useEffect)((function(){var t=!0;p.c(o.current).selectAll("svg").remove();var r=p.c(o.current).append("svg").attr("height",n).attr("width",n),u=new Array(40).fill(n/2).map((function(t,e){return[t+t*Math.cos(9*e*2*Math.PI/360),t-t*Math.sin(9*e*2*Math.PI/360)]})),l=p.b();return r.append("path").attr("d",l(u)).attr("stroke","#000").attr("fill","#ffffff").transition().duration(a).delay(1===f?c:(i-1)*a).attrTween("d",(function(t,n,r){return Object(g.interpolatePath)(l(u),e.toPathData())})).attrTween("fill",(function(t,e,n){return p.a("#ffffff",h())})).transition().duration(a).delay((i-1)*a).attrTween("d",(function(t,n,r){return Object(g.interpolatePath)(e.toPathData(),l(u))})).attrTween("fill",(function(t,e,n){return p.a(h(),"#ffffff")})).on("end",(function(){t&&d((function(t){return t+1}))})),function(){t&&(t=!1)}}),[f]),Object(O.jsx)("div",{style:{height:n+"px",width:n+"px"},ref:o})},m=n(53),w=n.n(m),y=function(t){var e=t.children,n=t.color,r=t.handler;return Object(O.jsx)("a",{id:w.a.Button,onClick:r,style:{backgroundColor:n},children:e})},D=function(t){return Object(O.jsx)("div",{style:{position:"fixed",height:"100%",width:"100%",bottom:"0",top:"0",left:"0",right:"0",backgroundColor:"#000000eb",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"3.5rem",color:"white"},onDragEnter:function(t){return t.preventDefault()},onDragOver:function(t){return t.preventDefault()},onDragLeave:function(e){return t.handleDragLeave(e)},onDrop:function(e){return t.handleDrop(e)},children:"\u8acb\u5728\u6b64\u653e\u7f6e\u4f60\u7684 ttf \u6a94\u6848"})},S=(n(70),function(t){var e=Object(r.useState)(null),n=Object(s.a)(e,2),a=n[0],c=n[1],o=Object(r.useState)("cwTeXKai"),d=Object(s.a)(o,2),v=d[0],p=d[1],g=Object(r.useState)([]),m=Object(s.a)(g,2),w=m[0],S=m[1],_=Object(r.useState)(null),L=Object(s.a)(_,2),P=L[0],k=L[1],z=Object(r.useRef)(null),C=Object(r.useRef)(null),B=Object(r.useState)(!1),M=Object(s.a)(B,2),T=M[0],A=M[1],E=function(t){var e=[],n=z.current.clientHeight<z.current.clientWidth/C.current.value.length?z.current.clientHeight:z.current.clientWidth/C.current.value.length,r=[];r.svgSize=n,r.currentInputString=C.current.value;for(var a=0;a<C.current.value.length;a++){var c=t.getPath(C.current.value[a],0,0,n).getBoundingBox(),i=t.getPath(C.current.value[a],0,c.y2-c.y1,n);r.push({path:i,name:C.current.value[a]}),e.push(Object(O.jsx)(x,{parsedPath:i,size:n,duration:1e3,delay:1e3*a,textLength:C.current.value.length},C.current.value[a]))}k(e),j.storePath(r)},I=!1;return Object(r.useEffect)((function(){(function(){var t=Object(l.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.load("fonts/".concat(v,".ttf"));case 2:e=t.sent,c(e),(n=[]).push({name:v,font:e}),window.self===window.top?C.current.value="\u5317\u79d1\u5927\u540d\u6821\u5b9e\u5c5e\u725b\u903c":C.current.value="\u4ef2\u7693\u744b",E(e),S(n);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(O.jsxs)("div",{id:b.a.Layout,children:[T?Object(O.jsx)(D,{handleDrop:function(t){t.preventDefault(),A(!1);var e=t.dataTransfer.files;if(/\.ttf/.test(e[0].name)){var n=e[0].name.replace(".ttf","");if("undefined"===typeof w.find((function(t){return t.name===n}))){var r=new FileReader;r.onload=function(){var t=Object(l.a)(u.a.mark((function t(e){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=f.a.parse(e.target.result),p(n),c(r),(a=w.slice()).push({name:n,font:r}),S(a),k(null);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.readAsArrayBuffer(e[0])}}},handleDragLeave:function(t){t.preventDefault(),A(!1)}}):"",Object(O.jsx)("div",{className:"navbar navbar-dark bg-dark",children:Object(O.jsx)("div",{className:"navbar-brand",style:{fontSize:"2rem"},children:" Lab07 -- Hanzi Circle Transition "})}),Object(O.jsxs)("div",{className:"".concat(b.a["main-content"]," container"),onDragEnter:function(t){t.preventDefault(),A(!0)},onDragOver:function(t){t.preventDefault()},onKeyPress:function(t){13==t.which&&E(a)},children:[Object(O.jsxs)("div",{id:b.a["Main-Section"],children:[Object(O.jsx)("h1",{style:{fontSize:"2.5em"},children:" Lab07 - \u5b57\u578b\u52d5\u756b "}),Object(O.jsx)("h2",{children:" \u8acb\u8f38\u5165\u4f60\u7684\u59d3\u540d "}),Object(O.jsxs)("div",{children:[" \u76ee\u524d\u5b57\u578b: ",v," "]}),Object(O.jsx)("div",{children:" \u4f60\u53ef\u4ee5\u5c07 ttf \u6a94\u62d6\u62c9\u81f3\u672c\u7db2\u9801\u4e2d\u4f86\u4f7f\u7528\u4e0d\u540c\u7684\u5b57\u5f62\u6a94 "}),Object(O.jsxs)("div",{children:["\u9078\u64c7\u5b57\u578b: \u2002",Object(O.jsx)("select",{onChange:function(t){var e=w.slice().find((function(e){return e.name===t.target.value})),n=e.font,r=e.name;c(n),p(r),k(null)},value:v,children:w.map((function(t){return Object(O.jsxs)("option",{value:t.name,children:[" ",t.name," "]},t.name)}))})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"text",ref:C}),Object(O.jsxs)("div",{id:b.a["button-group"],children:[Object(O.jsx)(y,{color:"#151a4df5",handler:function(){E(a)},children:" \u8a08\u7b97 "}),Object(O.jsx)(y,{color:null!==P?"#151a4df5":"#3e423b",handler:function(t){if(null===P)return console.warn("Current Text is empty");if(I)return console.error("Zip file is generating");I=!0;var e,n=new h.a,r=j.getPath(),a=Object(i.a)(r);try{for(a.s();!(e=a.n()).done;){var c=e.value,o='<svg width="'.concat(r.svgSize,'" height="').concat(r.svgSize,'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="').concat(c.path.toPathData(),'" stroke="#000" fill="black" /></svg>');n.file("".concat(c.name,"_U+").concat(c.name.charCodeAt(0).toString(16).toUpperCase(),".svg"),o)}}catch(u){a.e(u)}finally{a.f()}n.generateAsync({type:"blob"}).then((function(t){I=!1;var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=r.currentInputString,e.click()}))},children:" \u4e0b\u8f09SVG "}),Object(O.jsx)(y,{color:"#701a2af5",handler:function(){k(null),j.clearPath(),C.current.value=""},children:" \u6e05\u9664\u6587\u5b57 "})]})]})]}),Object(O.jsx)("div",{id:b.a["node-container"],ref:z,children:null!==P?Object(O.jsx)(O.Fragment,{children:P}):Object(O.jsx)(O.Fragment,{})})]})]})}),_=function(){return Object(O.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(O.jsx)(S,{})})};c.a.render(Object(O.jsx)(_,{}),document.getElementById("root"))},20:function(t,e){},53:function(t,e,n){t.exports={Button:"Button_Button__Y3nyb"}},58:function(t,e,n){},60:function(t,e,n){},61:function(t,e,n){}},[[129,1,2]]]);