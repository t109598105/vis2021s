(this["webpackJsonpsign-visualization"]=this["webpackJsonpsign-visualization"]||[]).push([[0],{11:function(t,e,n){t.exports={App:"App_App__1Yyag"}},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(10),i=n.n(r),c=(n(16),n(3)),s=n(7),o=n(2),l=n(0),d=function(t){var e=t.csvData,n=t.height,r=t.width,i=t.leftAxisSize;"undefined"==typeof i&&(i=20);var c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=e.map((function(t){return t.name})),n=["attend","absence"],a=c.current.clientWidth,r=c.current.clientHeight,l=o.f(c.current).append("svg").attr("width",a).attr("height",r).append("g"),d=o.c().domain(t).range([0,a-i]).padding([1]),u=o.d().domain([0,Math.max.apply(Math,Object(s.a)(e.map((function(t){return t.attend+t.absence}))))]).range([r-25,0]),p=o.e().domain(n).range(["#377eb8","#e41a1c"]),f=o.g().keys(n)(e);l.append("g").style("transform","translateX(".concat(i,"px")).selectAll("g").data(f).enter().append("g").attr("fill",(function(t){return p(t.key)})).selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t){return d(t.data.name)})).attr("y",(function(t){return u(t[1])})).attr("height",(function(t){return 0})).attr("width",1).attr("rx",10).transition().duration(500).attr("y",(function(t){return u(t[1])})).attr("height",(function(t){return u(t[0])-u(t[1])})).transition().attr("x",(function(t){return d(t.data.name)})).attr("width",10).attr("rx",0),l.selectAll("text").data(f[0]).enter().append("text").attr("x",-9999).attr("y",(function(t){return u(t[0])+10})).text((function(t){return t.data.name[0]})).style("font-size","12px").style("opacity","0").style("transform","translate(".concat(i,"px)")).transition().duration(1e3).attr("x",(function(t){return d(t.data.name)-1})).style("opacity","1"),l.append("g").style("transform","translateX(".concat(i,"px)")).call(o.a(u))}),[]),Object(l.jsx)("div",{style:{width:r,height:n,margin:"20px 0"},ref:c})},u=function(t){var e=t.csvData,n=t.height,r=t.width,i=t.leftAxisSize;"undefined"==typeof i&&(i=20);var c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=e.map((function(t){return t.name})),n=["attend","absence"],a=c.current.clientWidth,r=c.current.clientHeight,l=o.f(c.current).append("svg").attr("width",a).attr("height",r).append("g"),d=o.c().domain(t).range([0,a-i]).padding([1]),u=o.d().domain([0,Math.max.apply(Math,Object(s.a)(e.map((function(t){return t.attend+t.absence}))))]).range([r-25,0]),p=o.e().domain(n).range(["#377eb8","#e41a1c"]),f=o.g().keys(n)(e),h=f.find((function(t){return"attend"==t.key})),x=f.find((function(t){return"absence"==t.key}));l.append("g").style("transform","translateX(".concat(i,"px")).attr("fill",p("attend")).selectAll("rect").data(h).enter().append("rect").attr("x",(function(t){return d(t.data.name)})).attr("y",(function(t){return u(t[1])})).attr("height",(function(t){return u(t[0])-u(t[1])})).attr("width",1).transition().attr("x",(function(t){return d(t.data.name)})).attr("width",5),l.append("g").style("transform","translateX(".concat(i,"px")).attr("fill",p("absence")).selectAll("rect").data(x).enter().append("rect").attr("x",(function(t){return d(t.data.name)+5})).attr("y",(function(t){return u(t[1])})).attr("height",(function(t){return u(t[0])-u(t[1])})).attr("width",1).transition().attr("y",(function(t){return r-25-(u(t[0])-u(t[1]))+u(t[1])})).transition().attr("x",(function(t){return d(t.data.name)+5})).attr("width",5),l.selectAll("text").data(f[0]).enter().append("text").attr("x",-9999).attr("y",(function(t){return u(t[0])+10})).text((function(t){return t.data.name[0]})).style("font-size","12px").style("opacity","0").style("transform","translate(".concat(i,"px)")).transition().duration(1e3).attr("x",(function(t){return d(t.data.name)-3})).style("opacity","1"),l.append("g").style("transform","translateX(".concat(i,"px)")).call(o.a(u))}),[]),Object(l.jsx)("div",{style:{width:r,height:n,margin:"20px 0"},ref:c})},p=function(t){var e=t.height,n=t.width,r=t.top,i=t.right,c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=o.e().domain(["attend","absence"]).range(["#377eb8","#e41a1c"]),a=c.current;a.width=n,a.height=e;var r=a.getContext("2d");r.fillStyle=t("attend"),r.fillRect(n/8,e/8,n/4,e/4),r.fillStyle=t("absence"),r.fillRect(n/8,5*e/8,n/4,e/4),r.fillStyle="#000000",r.font="20px Arial",r.fillText("\u51fa\u5e2d",5*n/8,e/4),r.fillStyle="#000000",r.font="20px Arial",r.fillText("\u672a\u51fa\u5e2d",5*n/8,3*e/4)}),[]),Object(l.jsx)("div",{style:{borderStyle:"solid",borderWidth:".1px",height:e+"px",width:n+"px",top:r,right:i,position:"absolute"},children:Object(l.jsx)("canvas",{ref:c})})},f=n(9),h=n.n(f),x=function(t){var e=t.petal,n=t.size,r=t.speed,i=t.petalToShow,s=t.children,o=360/e,d=Object(a.useState)([0,i-1,1]),u=Object(c.a)(d,2),p=u[0],f=u[1];Object(a.useEffect)((function(){window.setInterval((function(){f((function(t){return null===t[2]?[0,i-1,1]:(t[2]+1)*i>e?[t[1]+1,e+1,null]:[t[1]+1,i*(t[2]+1)-1,t[2]+1]}))}),r)}),[]);var x=new Array(e+1).fill(1).map((function(t,e){return Object(l.jsx)("div",{style:{borderTopStyle:"solid",borderWidth:"1.5px",width:n/4+"px",position:"absolute",top:n/8*4-n/8*3*Math.sin(2*Math.PI/360*o*e)+"px",left:n/8*3+n/8*3*Math.cos(2*Math.PI/360*o*e)+"px",transform:"rotate(".concat(o*e*-1,"deg)"),margin:0},className:e>=p[0]&&e<=p[1]?h.a["show-pental"]:h.a["hide-pental"]},"petal"+e)}));return Object(l.jsxs)("div",{style:{height:n+"px",width:n+"px",textAlign:"center",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[x,Object(l.jsx)("div",{children:s})]})},g=n(4),j=n.n(g),b=function(t){var e=Object(a.useState)(null),n=Object(c.a)(e,2),r=n[0],i=n[1],s=Object(a.useState)(""),f=Object(c.a)(s,2),h=f[0],g=f[1],b=Object(a.useState)(!0),y=Object(c.a)(b,2),m=y[0],O=y[1];return Object(a.useEffect)((function(){o.b("https://sign-sheet-server.herokuapp.com/vis2021/getFile/postgraduate",(function(t){var e=t.map((function(t){var e=Object.keys(t).map((function(t){return{str:t,d:new Date(t)}})).filter((function(t){return!isNaN(t.d.getTime())})).sort((function(t,e){return t.d.getTime()-e.d.getTime()})).map((function(t){return t.str}));g(e.slice(-1)[0]);var n=e.map((function(e){return!!t[e].length&&(!isNaN(+t[e])&&+t[e])})).filter((function(t){return!1!==t})),a=n.filter((function(t){return!!t})).length,r=n.filter((function(t){return!t})).length;return{name:t.\u59d3\u540d,attend:a,absence:r}}));i(e),window.setInterval((function(){O((function(t){return!t}))}),3500)}))}),[]),null!==r?Object(l.jsxs)("div",{id:j.a.Layout,children:[Object(l.jsx)("h1",{children:" \u8cc7\u6599\u53ef\u8996\u5316\u51fa\u5e2d\u7d71\u8a08 "}),Object(l.jsxs)("div",{className:j.a.description,children:[" \u6700\u5f8c\u7d71\u8a08\u6642\u9593: ",Object(l.jsxs)("span",{children:[" ",h.length?h:"\u672a\u77e5"," "]})," "]}),Object(l.jsxs)("div",{className:j.a.description,children:[" \u986f\u793a\u578b\u5f0f: ",Object(l.jsxs)("span",{children:[" ",m?"\u4f7f\u7528\u5806\u758a\u5716":"\u4f7f\u7528\u76f4\u65b9\u5716"," "]})," "]}),Object(l.jsxs)("div",{className:j.a.description,children:[" \u4f7f\u7528API: ",Object(l.jsx)("code",{children:" GET postgraduate "})," "]}),Object(l.jsx)(p,{height:100,width:200,top:"25%",right:"10%"}),m?Object(l.jsx)(d,{csvData:r,height:"40%",width:"80%"}):Object(l.jsx)(u,{csvData:r,height:"40%",width:"80%"})]}):Object(l.jsxs)("div",{id:j.a.Layout,children:[Object(l.jsx)("h1",{children:"Fetching data, please wait..."}),Object(l.jsx)(x,{petal:12,size:150,speed:200,petalToShow:2,children:"Loading..."})]})},y=n(11),m=n.n(y);var O=function(){return Object(l.jsx)("div",{id:m.a.App,children:Object(l.jsx)(b,{})})};i.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))},4:function(t,e,n){t.exports={Layout:"Layout_Layout__183BX",description:"Layout_description__1Zfjn"}},9:function(t,e,n){t.exports={"show-pental":"Loading_show-pental__CkKaF",fadeIn:"Loading_fadeIn__3siW7","hide-pental":"Loading_hide-pental__YDcsR",fadeOut:"Loading_fadeOut__rnvBq"}}},[[18,1,2]]]);