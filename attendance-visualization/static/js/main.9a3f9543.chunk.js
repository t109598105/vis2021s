(this["webpackJsonpsign-visualization"]=this["webpackJsonpsign-visualization"]||[]).push([[0],{10:function(t,e,n){t.exports={loading:"Loading_loading__1ADR_",round:"Loading_round__3P3vw"}},11:function(t,e,n){t.exports={App:"App_App__1Yyag"}},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n(9),i=n.n(r),c=(n(16),n(7)),s=n(6),u=n(1),o=n(0),d=function(t){var e=t.csvData,n=t.height,r=t.width,i=t.leftAxisSize;"undefined"==typeof i&&(i=20);var c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=e.map((function(t){return t.name})),n=["attend","absence"],a=c.current.clientWidth,r=c.current.clientHeight,o=u.f(c.current).append("svg").attr("width",a).attr("height",r).append("g"),d=u.c().domain(t).range([0,a-i]).padding([1]),l=u.d().domain([0,Math.max.apply(Math,Object(s.a)(e.map((function(t){return t.attend+t.absence}))))]).range([r-25,0]),f=u.e().domain(n).range(["#377eb8","#e41a1c"]),p=u.g().keys(n)(e);o.append("g").style("transform","translateX(".concat(i,"px")).selectAll("g").data(p).enter().append("g").attr("fill",(function(t){return f(t.key)})).selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t){return d(t.data.name)})).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return 0})).attr("width",1).attr("rx",10).transition().duration(500).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return l(t[0])-l(t[1])})).transition().attr("x",(function(t){return d(t.data.name)})).attr("width",10).attr("rx",0),o.selectAll("text").data(p[0]).enter().append("text").attr("x",-9999).attr("y",(function(t){return l(t[0])+10})).text((function(t){return t.data.name[0]})).style("font-size","12px").style("opacity","0").style("transform","translate(".concat(i,"px)")).transition().duration(1e3).attr("x",(function(t){return d(t.data.name)-1})).style("opacity","1"),o.append("g").style("transform","translateX(".concat(i,"px)")).call(u.a(l))}),[]),Object(o.jsx)("div",{style:{width:r,height:n,margin:"20px 0"},ref:c})},l=function(t){var e=t.csvData,n=t.height,r=t.width,i=t.leftAxisSize;"undefined"==typeof i&&(i=20);var c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=e.map((function(t){return t.name})),n=["attend","absence"],a=c.current.clientWidth,r=c.current.clientHeight,o=u.f(c.current).append("svg").attr("width",a).attr("height",r).append("g"),d=u.c().domain(t).range([0,a-i]).padding([1]),l=u.d().domain([0,Math.max.apply(Math,Object(s.a)(e.map((function(t){return t.attend+t.absence}))))]).range([r-25,0]),f=u.e().domain(n).range(["#377eb8","#e41a1c"]),p=u.g().keys(n)(e),h=p.find((function(t){return"attend"==t.key})),g=p.find((function(t){return"absence"==t.key}));o.append("g").style("transform","translateX(".concat(i,"px")).attr("fill",f("attend")).selectAll("rect").data(h).enter().append("rect").attr("x",(function(t){return d(t.data.name)})).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return l(t[0])-l(t[1])})).attr("width",1).transition().attr("x",(function(t){return d(t.data.name)})).attr("width",5),o.append("g").style("transform","translateX(".concat(i,"px")).attr("fill",f("absence")).selectAll("rect").data(g).enter().append("rect").attr("x",(function(t){return d(t.data.name)+5})).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return l(t[0])-l(t[1])})).attr("width",1).transition().attr("y",(function(t){return r-25-(l(t[0])-l(t[1]))+l(t[1])})).transition().attr("x",(function(t){return d(t.data.name)+5})).attr("width",5),o.selectAll("text").data(p[0]).enter().append("text").attr("x",-9999).attr("y",(function(t){return l(t[0])+10})).text((function(t){return t.data.name[0]})).style("font-size","12px").style("opacity","0").style("transform","translate(".concat(i,"px)")).transition().duration(1e3).attr("x",(function(t){return d(t.data.name)-3})).style("opacity","1"),o.append("g").style("transform","translateX(".concat(i,"px)")).call(u.a(l))}),[]),Object(o.jsx)("div",{style:{width:r,height:n,margin:"20px 0"},ref:c})},f=function(t){var e=t.height,n=t.width,r=t.top,i=t.right,c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t=u.e().domain(["attend","absence"]).range(["#377eb8","#e41a1c"]),a=c.current;a.width=n,a.height=e;var r=a.getContext("2d");r.fillStyle=t("attend"),r.fillRect(n/8,e/8,n/4,e/4),r.fillStyle=t("absence"),r.fillRect(n/8,5*e/8,n/4,e/4),r.fillStyle="#000000",r.font="20px Arial",r.fillText("\u51fa\u5e2d",5*n/8,e/4),r.fillStyle="#000000",r.font="20px Arial",r.fillText("\u672a\u51fa\u5e2d",5*n/8,3*e/4)}),[]),Object(o.jsx)("div",{style:{borderStyle:"solid",borderWidth:".1px",height:e+"px",width:n+"px",top:r,right:i,position:"absolute"},children:Object(o.jsx)("canvas",{ref:c})})},p=n(10),h=n.n(p),g=function(t){var e=t.size,n=e+"px",a=e+"px";return Object(o.jsx)("div",{id:h.a.loading,style:{width:a,height:n}})},x=n(3),j=n.n(x),b=function(t){var e=Object(a.useState)(null),n=Object(c.a)(e,2),r=n[0],i=n[1],s=Object(a.useState)(""),p=Object(c.a)(s,2),h=p[0],x=p[1],b=Object(a.useState)(!0),y=Object(c.a)(b,2),m=y[0],v=y[1];return Object(a.useEffect)((function(){u.b("https://sign-sheet-server.herokuapp.com/vis2021/getFile/postgraduate",(function(t){var e=t.map((function(t){var e=Object.keys(t).map((function(t){return{str:t,d:new Date(t)}})).filter((function(t){return!isNaN(t.d.getTime())})).sort((function(t,e){return t.d.getTime()-e.d.getTime()})).map((function(t){return t.str}));x(e.slice(-1)[0]);var n=e.map((function(e){return!!t[e].length&&(!isNaN(+t[e])&&+t[e])})).filter((function(t){return!1!==t})),a=n.filter((function(t){return!!t})).length,r=n.filter((function(t){return!t})).length;return{name:t.\u59d3\u540d,attend:a,absence:r}}));i(e),window.setInterval((function(){v((function(t){return!t}))}),3500)}))}),[]),null!==r?Object(o.jsxs)("div",{id:j.a.Layout,children:[Object(o.jsx)("h1",{children:" \u8cc7\u6599\u53ef\u8996\u5316\u51fa\u5e2d\u7d71\u8a08 "}),Object(o.jsxs)("div",{className:j.a.description,children:[" \u6700\u5f8c\u7d71\u8a08\u6642\u9593: ",Object(o.jsxs)("span",{children:[" ",h.length?h:"\u672a\u77e5"," "]})," "]}),Object(o.jsxs)("div",{className:j.a.description,children:[" \u986f\u793a\u578b\u5f0f: ",Object(o.jsxs)("span",{children:[" ",m?"\u4f7f\u7528\u5806\u758a\u5716":"\u4f7f\u7528\u76f4\u65b9\u5716"," "]})," "]}),Object(o.jsxs)("div",{className:j.a.description,children:[" \u4f7f\u7528API: ",Object(o.jsx)("code",{children:" GET postgraduate "})," "]}),Object(o.jsx)(f,{height:100,width:200,top:"25%",right:"10%"}),m?Object(o.jsx)(d,{csvData:r,height:"40%",width:"80%"}):Object(o.jsx)(l,{csvData:r,height:"40%",width:"80%"})]}):Object(o.jsxs)("div",{id:j.a.Layout,children:[Object(o.jsx)("h1",{children:"Fetching data, please wait..."}),Object(o.jsx)(g,{size:100})]})},y=n(11),m=n.n(y);var v=function(){return Object(o.jsx)("div",{id:m.a.App,children:Object(o.jsx)(b,{})})};i.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))},3:function(t,e,n){t.exports={Layout:"Layout_Layout__183BX",description:"Layout_description__1Zfjn"}}},[[18,1,2]]]);