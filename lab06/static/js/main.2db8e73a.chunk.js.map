{"version":3,"sources":["Components/Loading.js","EventBus.js","Components/InfoSection.js","Components/DrawStack.js","Components/Layout.js","App.js","index.js","Assets/Loading.module.css","Assets/Layout.module.css"],"names":["Loading","props","petal","size","speed","petalToShow","children","angle","useState","tick","setTick","useEffect","myInterVal","window","setInterval","previousVal","clearInterval","pentalDiv","Array","fill","map","_","i","style","borderTopStyle","borderWidth","width","position","top","Math","sin","PI","left","cos","transform","margin","className","height","textAlign","display","justifyContent","alignItems","flexDirection","EventBus","events","eventsMapping","event","callback","indexOf","console","error","push","listenerIdx","splice","data","forEach","f","eventIdx","InfoSection","showInfo","setShowInfo","eventBus","listenTo","borderStyle","y","x","subject","score","property1","property2","DrawStack","csvData","container","useRef","register","WIDTH","d3","current","node","clientWidth","HEIGHT","clientHeight","padding","svg","append","attr","groups","length","e","toString","subgroups","columns","slice","xScale","domain","range","yScale","max","Object","keys","k","join","split","color","floor","random","getRandomColor","stackedData","selectAll","enter","d","key","bandwidth","on","this","parentNode","getAttribute","target","emit","pageX","pageY","屬性一","屬性二","yAxis","tickSize","xAxis","call","textContent","transition","duration","legend","getBoundingClientRect","text","ref","Layout","setCsvData","id","App","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.2db8e73a.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport style from '../Assets/Loading.module.css';\r\n\r\nconst Loading = props => {\r\n    const { petal, size, speed, petalToShow, children } = props;\r\n\r\n    const angle = 360 / petal;\r\n\r\n    const [ tick, setTick ] = useState([0, petalToShow - 1 , 1]);\r\n\r\n    useEffect(() => {    \r\n        const myInterVal = window.setInterval(() => {\r\n            setTick(previousVal => {\r\n                if(previousVal[2] === null){\r\n                    return [0, petalToShow - 1 , 1];\r\n                }\r\n                if((previousVal[2] + 1) * petalToShow > petal){\r\n                    return [previousVal[1] + 1, petal + 1, null];\r\n                }\r\n                return [previousVal[1] + 1, petalToShow * (previousVal[2] + 1) - 1, previousVal[2] + 1];\r\n            });\r\n        }, speed);\r\n        \r\n        return () => {\r\n            window.clearInterval(myInterVal);\r\n        }\r\n    }, []);\r\n\r\n\r\n\r\n    const pentalDiv = new Array(petal + 1).fill(1).map((_, i) => \r\n        <div key={'petal' + i}\r\n            style={{\r\n                borderTopStyle: 'solid', \r\n                borderWidth: '1.5px', \r\n                width: size / 4 + 'px',\r\n                position: 'absolute',\r\n                top: size / 8 * 4 - size / 8 * 3 * Math.sin(2 * Math.PI / 360 * angle * i) + 'px',\r\n                left: size / 8 * 3 + size / 8 * 3 * Math.cos(2 * Math.PI / 360 * angle * i) + 'px',\r\n                transform: `rotate(${angle * i * -1}deg)`,\r\n                margin: 0,\r\n            }}\r\n            className={i >= tick[0] && i<= tick[1] ? style['show-pental'] : style['hide-pental']}\r\n        ></div>\r\n    );\r\n\r\n    return (\r\n        <div style={{\r\n            height: size + 'px',\r\n            width: size + 'px',\r\n            textAlign: 'center',\r\n            position: 'relative',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexDirection: 'column'\r\n        }}>\r\n            { pentalDiv }\r\n            <div>{ children }</div>\r\n        </div>\r\n\r\n    );\r\n};\r\n\r\nexport default Loading;\r\n\r\n","const EventBus = (() => {\r\n    const events = [];\r\n    const eventsMapping = {};\r\n\r\n    class myEvent {\r\n        constructor(){}\r\n\r\n        listenTo(event, callback){\r\n            if(events.indexOf(event) === -1){\r\n                console.error('Event: ' + event + ' is not registered');\r\n                return false;\r\n            }\r\n\r\n            eventsMapping[event].push(callback);\r\n            return true;\r\n        }\r\n\r\n        removeListener(event, callback){\r\n            if(events.indexOf(event) === -1){\r\n                console.error('Event: ' + event + ' is not registered');\r\n                return false;\r\n            }\r\n\r\n            const listenerIdx = eventsMapping[event].indexOf(callback);\r\n\r\n            if(listenerIdx !== -1){\r\n                eventsMapping[event].splice(listenerIdx, 1);\r\n                return true;\r\n            }\r\n            \r\n            console.error('Event listener not found');\r\n            return false;\r\n        }\r\n\r\n        register(event){\r\n            if(events.indexOf(event) !== -1){\r\n                console.error('Event: ' + event + ' has registered');\r\n                return false;\r\n            }\r\n            events.push(event);\r\n            eventsMapping[event] = [];\r\n            return true;\r\n        }\r\n\r\n        emit(event, data){\r\n            if(events.indexOf(event) === -1){\r\n                console.error('Event: ' + event + ' is not registered');\r\n                return false;\r\n            }\r\n            \r\n\r\n            eventsMapping[event].forEach(f => {\r\n                if(typeof f == 'function'){\r\n                    f(data);\r\n                }\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        remove(event, callback){\r\n            const eventIdx = events.indexOf(event);\r\n\r\n            if(eventIdx === -1){\r\n                console.error('Event: ' + event + ' is not registered');\r\n                return false;\r\n            }\r\n\r\n            events.splice(eventIdx, 1);\r\n            delete eventsMapping[event];\r\n\r\n            return true;\r\n        }\r\n\r\n    };\r\n\r\n    return new myEvent();\r\n})();\r\n\r\nexport default EventBus;","import { useState } from 'react';\r\nimport eventBus from '../EventBus';\r\n\r\nconst InfoSection = props => {\r\n    const [ showInfo, setShowInfo ] = useState(null);\r\n\r\n    const listener = data => {\r\n        setShowInfo(data);\r\n    };\r\n\r\n    eventBus.listenTo('showInfo', listener);\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            height: '90px',\r\n            width: '100px',\r\n            borderStyle: 'solid',\r\n            borderWidth: '.1px',\r\n            display: showInfo === null ? 'none': 'block',\r\n            top: showInfo === null ? 0 : showInfo.y - 50 +  'px',\r\n            left: showInfo === null ? 0 : showInfo.x + 'px'\r\n        }}>\r\n            {\r\n                showInfo === null\r\n                    ? \r\n                    <div></div>\r\n                    :\r\n                    <div>\r\n                        <div> <b>科目: { showInfo.subject }</b> </div>\r\n                        <div> <b>分數: { showInfo.score } </b> </div>\r\n                        <div> <b>屬性一: { showInfo.property1 } </b> </div>\r\n                        <div> <b>屬性二: { showInfo.property2 } </b> </div>\r\n                    </div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InfoSection;","import { useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nimport InfoSection from '../Components/InfoSection';\r\nimport eventBus from '../EventBus';\r\n\r\nconst DrawStack = props => {\r\n    const { csvData } = props;\r\n\r\n    const container = useRef(null);\r\n    eventBus.register('showInfo');\r\n\r\n    useEffect(() => {\r\n        const WIDTH = d3.select(container.current).node().clientWidth;\r\n        const HEIGHT = d3.select(container.current).node().clientHeight;\r\n\r\n        const padding = WIDTH * 0.03;\r\n\r\n        const svg = d3.select(container.current)\r\n                        .append('svg')\r\n                        .attr('width', WIDTH)\r\n                        .attr('height', HEIGHT)\r\n        ;\r\n\r\n        const groups = d3.range(csvData.length).map(e => e.toString());\r\n        const subgroups = csvData.columns.slice(0, csvData.columns.length - 2);\r\n\r\n        const getRandomColor = () => {\r\n            const letters = '0123456789ABCDEF';\r\n            let color = '#';\r\n            for (let i = 0; i < 6; i++) {\r\n                color += letters[Math.floor(Math.random() * 16)];\r\n            }\r\n            return color;\r\n        }\r\n        \r\n        const xScale  = d3.scaleBand()\r\n                            .domain(groups)\r\n                            .range([padding, WIDTH - padding])\r\n                            .padding([0.5])\r\n        ;\r\n        \r\n        \r\n        const yScale = d3.scaleLinear()\r\n                            .domain([0, Math.max(...csvData.map(e => Object.keys(e).map(k => +e[k])).join().split(',')) * subgroups.length])\r\n                            .range([HEIGHT - padding, padding])\r\n        ;\r\n\r\n        const color = d3.scaleOrdinal()\r\n                            .domain(subgroups)\r\n                            .range(new Array(subgroups.length).fill(1).map(_ => getRandomColor()))\r\n        ;\r\n\r\n        const stackedData = d3.stack()\r\n                                .keys(subgroups)\r\n                                (csvData)\r\n        ;\r\n\r\n        \r\n\r\n        svg.append('g')\r\n            .selectAll('g')\r\n            .data(stackedData)\r\n            .enter()\r\n            .append('g')\r\n            .attr('fill', d => color(d.key))\r\n                .selectAll('rect')\r\n                .data(d => d)\r\n                .enter()\r\n                .append('rect')\r\n                .style('opacity', '.5')\r\n                .attr('class', (d,i) => 'rect' + i )\r\n                .attr('x', (_,i) => xScale(i.toString()))\r\n                .attr('y', d => yScale(d[1]))\r\n                .attr('height', d => yScale(d[0]) - yScale(d[1]))\r\n                .attr('width', xScale.bandwidth())\r\n                .on('mouseover', function(d){\r\n                    const { event } = d3;\r\n\r\n                    const subject = subgroups[color.range().indexOf(this.parentNode.getAttribute('fill'))];\r\n\r\n                    d3.select(event.target)\r\n                        .style('opacity', '1')\r\n                    ;\r\n                    \r\n                    eventBus.emit('showInfo', {\r\n                        subject,\r\n                        score: d[1] - d[0],\r\n                        x: event.pageX,\r\n                        y: event.pageY,\r\n                        property1: d.data.屬性一,\r\n                        property2: d.data.屬性二\r\n                    });\r\n                })\r\n                .on('mouseleave', d => {\r\n                    const { event } = d3;\r\n\r\n                    d3.select(event.target)\r\n                        .style('opacity', '.5')\r\n                    ;\r\n\r\n                    eventBus.emit('showInfo', null);\r\n                })\r\n        ;\r\n\r\n\r\n        const yAxis = d3\r\n                        .axisLeft(yScale)\r\n                        .tickSize(-1*WIDTH, -1*WIDTH, 0)\r\n        ;\r\n\r\n        const xAxis = d3.axisBottom(xScale);\r\n\r\n        svg.append('g')\r\n            .style('transform', `translateX(${padding / 2}px)`)\r\n            .style('opacity', '.5')\r\n            .attr('id', 'yAxis')\r\n            .call(yAxis)\r\n        ;\r\n\r\n        svg.append('g')\r\n            .style('transform', `translateY(${HEIGHT - padding / 2}px)`)\r\n            .call(xAxis)\r\n                .selectAll('text')\r\n                .style('opacity', '.3')\r\n                .on('mouseover', d => {\r\n                    const { event } = d3;\r\n\r\n                    d3.selectAll(`.rect${event.target.textContent}`)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style('opacity', '1')\r\n                        .attr('width', xScale.bandwidth() * 4)  \r\n                    ;\r\n\r\n                    d3.select(event.target)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style('transform', 'translate(0, -20px) scale(2,2)')\r\n                        .style('opacity', '1')\r\n                    ;\r\n                })\r\n                .on('mouseleave', _ => {\r\n                    const { event } = d3;\r\n\r\n                    d3.selectAll(`.rect${event.target.textContent}`)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style('opacity', '.5')\r\n                        .attr('width', xScale.bandwidth())\r\n                    ;\r\n\r\n                    d3.select(event.target)\r\n                        .transition()\r\n                        .duration(500)\r\n                        .style('transform', 'scale(1,1)')\r\n                        .style('opacity', '.3')\r\n                    ;\r\n                    \r\n                })\r\n        ;\r\n\r\n        const legend = svg.append('g')\r\n                            .style('transform', `translate(${WIDTH / 4 * 3}px, ${-svg.node().getBoundingClientRect().top + d3.select('#yAxis').node().getBoundingClientRect().top + 10}px)`)\r\n        ;\r\n\r\n        legend.selectAll('rect')\r\n                .data(subgroups)\r\n                .enter()\r\n                .append('rect')\r\n                .attr('x', (d,i) => i * WIDTH / ( 4 * subgroups.length) )\r\n                .attr('width', WIDTH / (4 * subgroups.length * 3))\r\n                .attr('height', HEIGHT / 64)\r\n                .attr('fill', d => color(d))\r\n        ;\r\n\r\n        legend.selectAll('text')\r\n                .data(subgroups)\r\n                .enter()\r\n                .append('text')\r\n                .attr('x', (d,i) => WIDTH / (4 * subgroups.length * 3) + i * WIDTH / ( 4 * subgroups.length))\r\n                .attr('y', HEIGHT / 64)\r\n                .text(d => d)\r\n        ;\r\n\r\n        \r\n                \r\n    }, []);\r\n    \r\n    return (\r\n        <div style={{\r\n            height: '80%',\r\n            width: '100%',\r\n            position: 'relative'\r\n        }} ref={container}>\r\n            <InfoSection />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DrawStack;","import { useState, useEffect } from 'react';\r\n\r\nimport * as d3 from 'd3';\r\n\r\nimport style from '../Assets/Layout.module.css';\r\n\r\nimport Loading from './Loading';\r\nimport DrawStack from '../Components/DrawStack';\r\n\r\nconst Layout = () => {\r\n    const [ csvData, setCsvData ] = useState(null);\r\n\r\n    useEffect(() => {\r\n        d3.csv('data.csv', data => {\r\n            /*setTimeout(() => {\r\n\r\n                setCsvData(data);\r\n            }, 3000);*/\r\n\r\n            setCsvData(data);\r\n        });\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <div id={style.Layout}>\r\n            <h1> Lab06 </h1>\r\n            {\r\n                csvData === null \r\n                ? \r\n                    <>\r\n                        <h2> Loading CSV Data... </h2>\r\n                        <Loading petal={12} size={150} speed={200} petalToShow={2}>\r\n                            Loading...\r\n                        </Loading>\r\n                    </>\r\n                :\r\n                    <>\r\n                        <DrawStack csvData={csvData} />\r\n                    </>\r\n\r\n            }\r\n            \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Layout;","import Layout from './Components/Layout';\n\nfunction App() {\n  return (\n    <div style={{height: '100%', width: '100%'}}>\n      <Layout />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"show-pental\":\"Loading_show-pental___TJex\",\"fadeIn\":\"Loading_fadeIn__3FfGJ\",\"hide-pental\":\"Loading_hide-pental___hjnb\",\"fadeOut\":\"Loading_fadeOut__1MkY7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layout\":\"Layout_Layout__21-NZ\"};"],"sourceRoot":""}